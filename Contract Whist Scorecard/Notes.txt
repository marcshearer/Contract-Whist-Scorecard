List of outstanding things to do

Changes since last version
--------------------------
Fixed crash during sync (especially initial sync)
Fixed problem if tried to view after game had started - did not receive scores
Reinstated back button in score entry
Resuming goes into scorecard rather than resuming online game
Show average score in players
Show more info on iPad in players
Notification gives the wrong winner
Avoid spurious Resume Online Game messages
Last hand not shown when return from scorecard after its become your turn
Crash towards end of game where player has fewer cards than others
New backup option
When don't have online enabled doesn't seem to auto select nearby in hosting
Don't seem to clear resumed game properly on slaves - when start new game seemed to go back to interrupted game
When resume doesn't auto select device
Allows you to bid the number left if you re-bid or sometimes if you go into extended view
Make debug info available on production
Reduce wait before play card after bidding
Show over / under in hand
Send round in handState
Sort out text entry in confirm count (or block it)
Can't see over/under on iPhone 5S
Can choose bid which adds up to total - seemed to be when 1 less than <
Add shake handler to review view controller
Add connection info to nearby and change it from debug to and alertMessage in rabbit

4.1(2) ---------
Better reconnection for online games including 10 second refresh in broadcast
FaceTime call support

4.1(3) ---------
Avoid blue lines in player search
Leave selected invitees selected (and visible) when filtering

4.1 (5) ---------
Fixed crash when searching for players

4.1 (7) ---------
Reinstated version in settings
Got simulated notifications working again (wait for RabbitMQUri to be set up)
Connect correctly after accepting notification

4.1 (8) ---------
Avoid being locked in once accept notification for game
Stop timer when exit broadcast
Show players name rather than device for online games
Avoid accessing AppDelegate not on main thread

4.6 (1) ----------
More reliable communication in internet game

4.6 (2) ----------
Avoid current trick being sorted and hence wrong player having wrong card after a resume

4.6 (3) ----------
Shake now sends refresh (or requests refresh) rather than resetting network

4.6 (4-5) ----------
Fix missing watch icons and remember last hand over recovery

4.6 (6-8) --------
iPhone X support
Setting to show status bar

Next -------
Enable user interaction on labels in search


Bugs fix now
------------
In search dialogue (on iPad) if filter search any users who don't have a picture sometimes get changed to squares
Refresh always leaves "last trick" disabled

Short-term
----------
Make admin rotate options less available
Add tests for temporary settings
Add tests for history / location to check they're not saved if play a game
Get location/notification/online game notification permission in settings (and disable options if permissions not granted)
Auto-sync when download players in Get Started
Host view controller doesn't scroll when rotate
Update Walkthrough - esp online game

Medium-term
-----------

Long-term
---------
Sort out constraints when in landscape mode

Swift Gotchas / hints
---------------------
For good resizing on rotation call view.setNeedsLayout() from viewWillTransition and then override viewDidLayoutSubviews (see HandViewController) - NOTE - NOT viewWillLayoutSubviews - Also look at the animateAlongside approach in ScorepadViewController
Uncaught exception crashes are normally caused by
    Invalid reuse identifiers on list views / collection views
    Invalid names on segues
    Outlets not being set up correctly
To avoid flashing animations need to put the things that you want to animate inside another view
To animate (esp with constraints) need to call layoutIfNeeded immediately before and during animation - see Utility.animate()
When collection has spaces in it re-set the inter-item space and set scroll to horizontal
When button bar (or navigation bar) doesn't appear set the title in the parent view
If you get a duplicate navigation bar you can hide the default one with self.showNavigationBar()
Popovers on iPhone - need to set up the view to have a size of freedom and a status bar of none plus the stuff in prepare for segue
You can force a label to resize to fill its space by setting a height constraint and then setting this progammatically to a very large number
Get a crash with NS Fetch Controller if don't get rid of any pointers to cells before try to remove from collection view. Also it calls numberOfItemsIn Section internally and if you are adding or deleting cells you need to return +/- 1 or see the change below about deletePlayer()
Need to login to iCloud on each simulator
Default UserDefault settings are in AppDelegate
You can make a controller a delegate for a child view and hence receive information on things changing back in the parent
The parent or the child view can detect popover closure by adopting UIPopoverPresentationControllerDelegate and declaring popoverPresentationControllerShouldDismissPopover etc
Swipes are associated with a specific control - look at the swipes right click - gesture recognizer in referencing outlet connections
There is a problem in collection views when you delete or insert items. You have to do this in a batch update with the change to the counter - see deletePlayer() in PlayersViewController
Note that frame sizes are not correct yet until you get to viewDidAppear - you might have to avoid returning non-zero table view row count until you get to this point - see HandViewController
Table views don't always scroll in Swift 4 - set   tableView.delaysContentTouches = TRUE (Best through User-Defined Runtime Attributes in Storyboard editor)
To select a cell at initial display in a table view need to call cell.setSelected and tableView.selectRow from tableView.willDisplay (See SearchViewController)
To make the navigation bar the same colour as other controls - set the tint color of the navigation bar to the colour you want and uncheck the translucent bar
You can find the size outside the safe area using view.safeAreaInsets.top and view.safeAreaInsets.bottom etc
You can get the size of the safe area using view.safeAreaLayoutGuide.layoutFrame
To change the background colour of a section title in a TableView so that it still works on an iPhone X you have to set the colour of the backgroundView in willDisplayHeaderView (see HostViewController)
To make an image transparent background use Preview. Click the toolbox and a toolbar appears. Select the wand. Drag a rectangle anywhere in background. Turns red. Press delete. File/Save.
To remove menus from test scripts
    1,$s/[/][*][@]START_MENU_TOKEN[@][*][/]//g
    1,$s/[/][*].*[@]END_MENU_TOKEN[@][*][/]//g
Error message '/Users/Home/Library/Developer/Xcode/DerivedData' - Go to Product / Clean
When Table View wasn't scrolling it was because "Delay Touch Down" wasn't checked
Bot testing needs to have simulator set up sensibly - go into Xcode Server user to do this
Commands to sort out firewall prompt
Below in allowsim (in PATH)
    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate off
    /usr/libexec/ApplicationFirewall/socketfilterfw --add /Applications/Xcode.app/Contents/MacOS/Xcode
    /usr/libexec/ApplicationFirewall/socketfilterfw --add /Applications/Xcode.app/Contents/Developer/Applications/Simulator.app/Contents/MacOS/Simulator
    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on
Remapped home and end etc using ~/Library/KeyBindings/DefaultKeyBinding.dict - Did Ctrl-C etc in the keyboard settings app shortcuts but then reversed it
To get rid of insets in a table view need to include willDisplayCell delegate routine and set content to be fixed insets of zero. See ReviewViewController
